Module("libspoofax/sdf/pp",[Imports([Import("libstratego-gpp")]),Rules([SDefT("ia-get-sort",[],[],Prim("\"SSL_EXT_get_sort_imploder_attachment\"",[RootApp(Id)]))]),Signature([Constructors([OpDecl("Parenthetical",FunType([ConstType(SortNoArgs("Unknown"))],ConstType(SortNoArgs("Unknown")))),OpDecl("Offside",FunType([ConstType(SortNoArgs("ConstraintTreeReference")),ConstType(Sort("List",[SortNoArgs("ConstraintTreeReference")]))],ConstType(SortNoArgs("ShortConstraint")))),OpDecl("Indent",FunType([ConstType(SortNoArgs("ConstraintTreeReference")),ConstType(Sort("List",[SortNoArgs("ConstraintTreeReference")]))],ConstType(SortNoArgs("ShortConstraint")))),OpDecl("NewLineIndent",FunType([ConstType(SortNoArgs("ConstraintTreeReference")),ConstType(Sort("List",[SortNoArgs("ConstraintTreeReference")]))],ConstType(SortNoArgs("ShortConstraint")))),OpDecl("NewLineIndentBy",FunType([ConstType(SortNoArgs("NatCon")),ConstType(SortNoArgs("ConstraintTreeReference")),ConstType(Sort("List",[SortNoArgs("ConstraintTreeReference")]))],ConstType(SortNoArgs("ShortConstraint")))),OpDecl("Align",FunType([ConstType(SortNoArgs("ConstraintTreeReference")),ConstType(Sort("List",[SortNoArgs("ConstraintTreeReference")]))],ConstType(SortNoArgs("ShortConstraint")))),OpDecl("Align",FunType([ConstType(SortNoArgs("ConstraintTreeReference"))],ConstType(SortNoArgs("ShortConstraint")))),OpDecl("PosRef",FunType([ConstType(SortNoArgs("NatCon"))],ConstType(SortNoArgs("ConstraintTreeReference")))),OpDecl("LiteralRef",FunType([ConstType(SortNoArgs("StrCon"))],ConstType(SortNoArgs("ConstraintTreeReference")))),OpDecl("LabelRef",FunType([ConstType(SortNoArgs("IdCon"))],ConstType(SortNoArgs("ConstraintTreeReference"))))])]),Strategies([SDefT("pp-one",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[],Seq(GuardedLChoice(CallT(SVar("pp"),[],[]),Id,Match(NoAnnoList(Op("Parenthetical",[RootApp(CallT(SVar("pp"),[],[]))])))),CallT(SVar("filter"),[CallT(SVar("gpp-is-real-vbox"),[],[])],[]))),SDefT("pp-one-V",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[],Seq(CallT(SVar("pp-one"),[CallT(SVar("pp"),[],[])],[]),GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("V",[NoAnnoList(List([])),RootApp(Id)])))))),SDefT("pp-one-Z",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[],Seq(CallT(SVar("pp-one"),[CallT(SVar("pp"),[],[])],[]),GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("Z",[NoAnnoList(List([])),RootApp(Id)])))))),SDefT("pp-option",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[],GuardedLChoice(Seq(CallT(SVar("is-string"),[],[]),CallT(SVar("pp"),[],[])),Id,GuardedLChoice(Scope([],SRule(Rule(NoAnnoList(Op("None",[])),NoAnnoList(List([])),[]))),Id,Match(NoAnnoList(Op("Some",[RootApp(CallT(SVar("pp"),[],[]))])))))),SDefT("pp-V-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("V",[NoAnnoList(List([])),RootApp(CallT(SVar("map"),[CallT(SVar("pp-one-V"),[CallT(SVar("pp"),[],[])],[])],[]))]))))),SDefT("pp-V-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[VarDec("vs",ConstType(SortNoArgs("ATerm")))],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("V",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("VS",[])),Var("vs")]))])),RootApp(CallT(SVar("map"),[CallT(SVar("pp-one-V"),[CallT(SVar("pp"),[],[])],[])],[]))]))))),SDefT("pp-V-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[VarDec("vs",ConstType(SortNoArgs("ATerm"))),VarDec("sep",ConstType(SortNoArgs("ATerm")))],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("V",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("VS",[])),Var("vs")]))])),RootApp(Seq(CallT(SVar("map"),[CallT(SVar("pp-one-V"),[CallT(SVar("pp"),[],[])],[])],[]),CallT(SVar("at-init"),[CallT(SVar("add-sep"),[],[Var("sep")]),Id],[])))]))))),SDefT("pp-indent",[],[VarDec("is",ConstType(SortNoArgs("ATerm")))],Seq(CallT(SVar("filter"),[CallT(SVar("gpp-is-real-vbox"),[],[])],[]),GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("H",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("HS",[])),Var("is")]))])),NoAnnoList(List([NoAnnoList(Op("S",[NoAnnoList(Str("\"\""))])),NoAnnoList(Op("H",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("HS",[])),NoAnnoList(Str("\"0\""))]))])),RootApp(CallT(SVar("map"),[CallT(SVar("indent-Z-boxes"),[],[Var("is")])],[]))]))]))])))))),SDefT("indent-Z-boxes",[],[VarDec("is",ConstType(SortNoArgs("ATerm")))],SRule(Rule(AnnoList(Op("H",[Var("opt"),AnnoList(Var("boxes"),[Var("l*")])]),[Var("a*")]),AnnoList(Op("H",[Var("opt"),AnnoList(Var("new-boxes"),[Var("l*")])]),[Var("a*")]),[WithClause(Assign(Var("new-boxes"),App(CallT(SVar("map"),[CallT(SVar("indent-Z-boxes"),[],[Var("is")])],[]),Var("boxes"))))]))),SDefT("indent-Z-boxes",[],[VarDec("is",ConstType(SortNoArgs("ATerm")))],SRule(Rule(AnnoList(Op("V",[Var("opt"),AnnoList(Var("boxes"),[Var("l*")])]),[Var("a*")]),AnnoList(Op("V",[Var("opt"),AnnoList(Var("new-boxes"),[Var("l*")])]),[Var("a*")]),[WithClause(Assign(Var("new-boxes"),App(CallT(SVar("map"),[CallT(SVar("indent-Z-boxes"),[],[Var("is")])],[]),Var("boxes"))))]))),SDefT("indent-Z-boxes",[],[VarDec("is",ConstType(SortNoArgs("ATerm")))],SRule(Rule(As(Var("s"),NoAnnoList(Op("S",[Wld]))),Var("s"),[]))),SDefT("indent-Z-boxes",[],[VarDec("is",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(List([])),NoAnnoList(List([])),[]))),SDefT("indent-Z-boxes",[],[VarDec("is",ConstType(SortNoArgs("ATerm")))],SRule(Rule(As(Var("z"),NoAnnoList(Op("Z",[NoAnnoList(List([])),NoAnnoList(List([]))]))),Var("z"),[]))),SDefT("indent-Z-boxes",[],[VarDec("is",ConstType(SortNoArgs("ATerm")))],SRule(Rule(AnnoList(Op("Z",[NoAnnoList(List([])),AnnoList(ListTail([AnnoList(Var("b"),[Var("b-annos*")])],Var("bs")),[Var("l*")])]),[Var("a*")]),AnnoList(Op("Z",[NoAnnoList(List([])),AnnoList(ListTail([AnnoList(Var("b'"),[Var("b-annos*")])],Var("bs'")),[Var("l*")])]),[Var("a*")]),[WithClause(Seq(Assign(Var("b'"),App(CallT(SVar("indent-Z-boxes"),[],[Var("is")]),Var("b"))),Assign(Var("bs'"),App(CallT(SVar("map"),[CallT(SVar("indent-boxes-list"),[],[Var("is")])],[]),Var("bs")))))]))),SDefT("indent-boxes-list",[],[VarDec("is",ConstType(SortNoArgs("ATerm")))],SRule(Rule(AnnoList(Var("b"),[Var("a*")]),NoAnnoList(Op("H",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("HS",[])),Var("is")]))])),NoAnnoList(List([NoAnnoList(Op("S",[NoAnnoList(Str("\"\""))])),AnnoList(Var("b'"),[Var("a*")])]))])),[WithClause(Assign(Var("b'"),App(CallT(SVar("indent-Z-boxes"),[],[Var("is")]),Var("b"))))]))),SDefT("pp-H-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("H",[NoAnnoList(List([])),RootApp(CallT(SVar("map"),[CallT(SVar("pp-one-Z"),[CallT(SVar("pp"),[],[])],[])],[]))]))))),SDefT("pp-H-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("H",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("HS",[])),NoAnnoList(Str("\"0\""))]))])),RootApp(Seq(CallT(SVar("map"),[CallT(SVar("pp-one-Z"),[CallT(SVar("pp"),[],[])],[])],[]),CallT(SVar("separate-by"),[],[NoAnnoList(Op("S",[Var("sep")]))])))]))))),SDefT("pp-HV-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("HV",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("HS",[])),NoAnnoList(Str("\"0\""))]))])),RootApp(CallT(SVar("map"),[CallT(SVar("pp-one-Z"),[CallT(SVar("pp"),[],[])],[])],[]))]))))),SDefT("pp-HV-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("HV",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("HS",[])),NoAnnoList(Str("\"0\""))]))])),RootApp(Seq(CallT(SVar("map"),[CallT(SVar("pp-one-Z"),[CallT(SVar("pp"),[],[])],[])],[]),CallT(SVar("separate-by"),[],[NoAnnoList(Op("S",[Var("sep")]))])))]))))),SDefT("pp-HZ-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("HZ",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("HS",[])),NoAnnoList(Str("\"0\""))]))])),RootApp(CallT(SVar("map"),[CallT(SVar("pp-one-Z"),[CallT(SVar("pp"),[],[])],[])],[]))]))))),SDefT("pp-HZ-list",[VarDec("pp",ConstType(SortNoArgs("ATerm")))],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],GuardedLChoice(Match(NoAnnoList(List([]))),Id,Build(NoAnnoList(Op("HZ",[NoAnnoList(List([NoAnnoList(Op("SOpt",[NoAnnoList(Op("HS",[])),NoAnnoList(Str("\"0\""))]))])),RootApp(Seq(CallT(SVar("map"),[CallT(SVar("pp-one-Z"),[CallT(SVar("pp"),[],[])],[])],[]),CallT(SVar("separate-by"),[],[NoAnnoList(Op("S",[Var("sep")]))])))])))))]),Signature([Constructors([OpDecl("CURSOR_ELEMENT",ConstType(SortVar("cursor")))])]),Rules([SDefT("prettyprint-origin-term",[],[],Fail),SDefT("prettyprint-completion-aux",[],[],GuardedLChoice(Seq(Match(NoAnnoList(Op("CURSOR_ELEMENT",[]))),Build(NoAnnoList(List([NoAnnoList(Op("S",[NoAnnoList(Str("\"##CURSOR##\""))]))])))),Id,GuardedLChoice(Seq(Match(NoAnnoList(Str("\"\""))),Build(NoAnnoList(List([])))),Id,Build(NoAnnoList(List([NoAnnoList(Op("S",[RootApp(CallT(SVar("is-string"),[],[]))]))]))))))]),Signature([Constructors([OpDecl("FALSE",ConstType(SortNoArgs("BooleanCondition"))),OpDecl("TRUE",ConstType(SortNoArgs("BooleanCondition")))])]),Rules([SDefT("check-nonterminal-isEmpty",[],[],GuardedLChoice(Match(NoAnnoList(Op("None",[]))),Id,GuardedLChoice(Match(NoAnnoList(Tuple([]))),Id,Match(NoAnnoList(List([])))))),SDefT("clean-layout-empty-symbols",[],[VarDec("pred-layout",ConstType(SortNoArgs("ATerm"))),VarDec("read-empty",ConstType(SortNoArgs("ATerm"))),VarDec("read-non-empty",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(ListTail([Var("h")],Var("hs"))),App(CallT(SVar("clean-layout-empty-symbols"),[],[Var("pred-layout'"),Var("read-empty"),Var("read-non-empty")]),Var("hs")),[WhereClause(Seq(BA(Match(NoAnnoList(Op("FALSE",[]))),Var("read-empty")),Seq(Assign(Var("layout-string"),App(Seq(Match(NoAnnoList(Op("S",[RootApp(Id)]))),CallT(SVar("is-layout-string"),[],[])),Var("h"))),Assign(Var("pred-layout'"),App(CallT(SVar("conc-strings"),[],[]),NoAnnoList(Tuple([Var("pred-layout"),Var("layout-string")])))))))]))),SDefT("clean-layout-empty-symbols",[],[VarDec("pred-layout",ConstType(SortNoArgs("ATerm"))),VarDec("read-empty",ConstType(SortNoArgs("ATerm"))),VarDec("read-non-empty",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(ListTail([Var("h")],Var("hs"))),App(CallT(SVar("clean-layout-empty-symbols"),[],[Var("pred-layout"),Var("read-empty"),Var("read-non-empty")]),Var("hs")),[WhereClause(Seq(BA(Match(NoAnnoList(Op("TRUE",[]))),Var("read-empty")),Assign(Var("layout-string"),App(Seq(Match(NoAnnoList(Op("S",[RootApp(Id)]))),CallT(SVar("is-layout-string"),[],[])),Var("h")))))]))),SDefT("clean-layout-empty-symbols",[],[VarDec("pred-layout",ConstType(SortNoArgs("ATerm"))),VarDec("read-empty",ConstType(SortNoArgs("ATerm"))),VarDec("read-non-empty",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(ListTail([Var("h")],Var("hs"))),NoAnnoList(List([NoAnnoList(Op("S",[Var("pred-layout")])),Var("h"),App(CallT(SVar("clean-layout-empty-symbols"),[],[NoAnnoList(Str("\"\"")),NoAnnoList(Op("FALSE",[])),NoAnnoList(Op("TRUE",[]))]),Var("hs"))])),[WhereClause(BA(Not(GuardedLChoice(CallT(SVar("check-nonterminal-isEmpty"),[],[]),Id,Seq(Match(NoAnnoList(Op("S",[RootApp(Id)]))),CallT(SVar("is-layout-string"),[],[])))),Var("h")))]))),SDefT("clean-layout-empty-symbols",[],[VarDec("pred-layout",ConstType(SortNoArgs("ATerm"))),VarDec("read-empty",ConstType(SortNoArgs("ATerm"))),VarDec("read-non-empty",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(ListTail([Var("h")],Var("hs"))),App(CallT(SVar("clean-layout-empty-symbols"),[],[NoAnnoList(Str("\" \"")),NoAnnoList(Op("TRUE",[])),Var("read-non-empty")]),Var("hs")),[WhereClause(Seq(BA(Match(NoAnnoList(Op("TRUE",[]))),Var("read-non-empty")),BA(CallT(SVar("check-nonterminal-isEmpty"),[],[]),Var("h"))))]))),SDefT("clean-layout-empty-symbols",[],[VarDec("pred-layout",ConstType(SortNoArgs("ATerm"))),VarDec("read-empty",ConstType(SortNoArgs("ATerm"))),VarDec("read-non-empty",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(ListTail([Var("h")],Var("hs"))),App(CallT(SVar("clean-layout-empty-symbols"),[],[NoAnnoList(Str("\"\"")),NoAnnoList(Op("TRUE",[])),Var("read-non-empty")]),Var("hs")),[WhereClause(Seq(BA(Match(NoAnnoList(Op("FALSE",[]))),Var("read-non-empty")),BA(CallT(SVar("check-nonterminal-isEmpty"),[],[]),Var("h"))))]))),SDefT("clean-layout-empty-symbols",[],[VarDec("pred-layout",ConstType(SortNoArgs("ATerm"))),VarDec("read-empty",ConstType(SortNoArgs("ATerm"))),VarDec("read-non-empty",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(List([])),NoAnnoList(List([])),[]))),SDefT("is-layout-string",[],[],SRule(Rule(Var("s"),Var("s"),[WhereClause(BA(Seq(CallT(SVar("explode-string"),[],[]),CallT(SVar("map"),[CallT(SVar("is-whitespace"),[],[])],[])),Var("s")))])))]),Rules([SDefT("add-sep",[],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(Op("V",[Var("vs"),Var("boxes")])),NoAnnoList(Op("V",[Var("vs"),Var("result")])),[WhereClause(GuardedLChoice(Where(Assign(NoAnnoList(List([Var("h")])),Var("boxes"))),Seq(Assign(NoAnnoList(Tuple([Var("c"),NoAnnoList(List([Var("cs"),Var("inner-boxes")]))])),App(CallT(SVar("explode-term"),[],[]),Var("h"))),Seq(Assign(Var("box-with-sep"),App(CallT(SVar("mkterm"),[],[]),NoAnnoList(Tuple([Var("c"),NoAnnoList(List([Var("cs"),App(CallT(SVar("conc"),[],[]),NoAnnoList(Tuple([Var("inner-boxes"),NoAnnoList(List([NoAnnoList(Op("S",[Var("sep")]))]))])))]))])))),Assign(Var("result"),NoAnnoList(List([Var("box-with-sep")]))))),Seq(Assign(Var("result'"),NoAnnoList(List([App(Seq(CallT(SVar("last"),[],[]),CallT(SVar("add-sep"),[],[Var("sep")])),Var("boxes"))]))),Assign(Var("result"),App(CallT(SVar("at-last"),[Build(Var("result'"))],[]),Var("boxes"))))))]))),SDefT("add-sep",[],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(Op("H",[Var("options"),Var("boxes")])),NoAnnoList(Op("H",[Var("options"),Var("result")])),[WhereClause(Assign(Var("result"),App(CallT(SVar("conc"),[],[]),NoAnnoList(Tuple([Var("boxes"),NoAnnoList(List([NoAnnoList(Op("S",[Var("sep")]))]))])))))]))),SDefT("add-sep",[],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(Op("I",[Var("is"),NoAnnoList(Op("H",[Var("hs"),Var("boxes")]))])),NoAnnoList(Op("I",[Var("is"),NoAnnoList(Op("H",[Var("hs"),Var("result")]))])),[WhereClause(Assign(Var("result"),App(CallT(SVar("conc"),[],[]),NoAnnoList(Tuple([Var("boxes"),NoAnnoList(List([NoAnnoList(Op("S",[Var("sep")]))]))])))))]))),SDefT("add-sep",[],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(Op("HV",[Var("hs"),Var("boxes")])),NoAnnoList(Op("HV",[Var("hs"),Var("result")])),[WhereClause(Assign(Var("result"),App(CallT(SVar("conc"),[],[]),NoAnnoList(Tuple([Var("boxes"),NoAnnoList(List([NoAnnoList(Op("S",[Var("sep")]))]))])))))]))),SDefT("add-sep",[],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(Op("HZ",[Var("hs"),Var("boxes")])),NoAnnoList(Op("HV",[Var("hs"),Var("result")])),[WhereClause(Assign(Var("result"),App(CallT(SVar("conc"),[],[]),NoAnnoList(Tuple([Var("boxes"),NoAnnoList(List([NoAnnoList(Op("S",[Var("sep")]))]))])))))]))),SDefT("add-sep",[],[VarDec("sep",ConstType(SortNoArgs("ATerm")))],SRule(Rule(NoAnnoList(Op("Z",[Var("hs"),Var("boxes")])),NoAnnoList(Op("HV",[Var("hs"),Var("result")])),[WhereClause(Assign(Var("result"),App(CallT(SVar("conc"),[],[]),NoAnnoList(Tuple([Var("boxes"),NoAnnoList(List([NoAnnoList(Op("S",[Var("sep")]))]))])))))])))])])